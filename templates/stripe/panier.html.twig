{% extends 'base.html.twig' %}

{% block body %}
    <h1>Mon panier</h1>

    {% if products|length > 0 %}
        <ul>
        {% for item in products %}
            <li>{{ item.product.name }} - {{ item.quantity }} x {{ item.product.price }} €</li>
        {% endfor %}
        </ul>

        <p>Total à payer : {{ total }} €</p>

        <form action="{{ path('stripe_payment') }}" method="post">
            <script
                src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                data-key="{{ stripe_public_key }}"
                data-amount="{{ total * 100 }}"
                data-name="Mon site web"
                data-description="Paiement de la commande"
                data-image="https://stripe.com/img/documentation/checkout/marketplace.png"
                data-locale="auto"
                data-currency="eur">
            </script>
        </form>
    {% else %}
        <p>Votre panier est vide.</p>
    {% endif %}
{% endblock %}